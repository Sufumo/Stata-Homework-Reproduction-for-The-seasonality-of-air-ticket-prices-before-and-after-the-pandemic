<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <title>Reveal.js + Stata Highlight Demo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <!-- Reveal.js 样式 -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js/dist/reveal.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js/dist/theme/black.css">

  <!-- Highlight.js 样式 -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/github-dark.min.css">

  <style>
    /* 字体设置 - 确保跨平台一致性 */
    @import url('https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@400;500;600&family=Inter:wght@300;400;500;600;700&display=swap');
    
    /* 全局字体设置 */
    body, .reveal {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif;
      font-weight: 400;
      line-height: 1.6;
    }
    
    /* 代码字体设置 */
    code, pre, .hljs {
      font-family: 'Source Code Pro', 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'Courier New', monospace !important;
      font-weight: 400;
    }
    
    /* 强制深色主题 - 防止移动端白底黑字 */
    .reveal {
      background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%) !important;
      color: #e2e8f0 !important;
    }
    
    .reveal .slides section {
      background: transparent !important;
      color: #e2e8f0 !important;
    }
    
    /* 标题样式优化 */
    .reveal .slides section h1 {
      color: #60a5fa !important;
      font-weight: 700 !important;
      font-size: clamp(3rem, 6vw, 4.5rem) !important;
      margin-bottom: 1rem !important;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3) !important;
    }
    
    .reveal .slides section h2 {
      color: #34d399 !important;
      font-weight: 600 !important;
      font-size: clamp(2.2rem, 5vw, 3rem) !important;
      margin-bottom: 0.8rem !important;
      border-bottom: 2px solid #34d399 !important;
      padding-bottom: 0.3rem !important;
    }
    
    .reveal .slides section h3 {
      color: #fbbf24 !important;
      font-weight: 500 !important;
      font-size: clamp(1.7rem, 4vw, 2.2rem) !important;
      margin-bottom: 0.6rem !important;
    }
    
    .reveal .slides section h4,
    .reveal .slides section h5,
    .reveal .slides section h6 {
      color: #a78bfa !important;
      font-weight: 500 !important;
    }
    
    /* 段落和列表样式 */
    .reveal .slides section p {
      color: #e2e8f0 !important;
      font-size: clamp(1.2rem, 3vw, 1.4rem) !important;
      line-height: 1.7 !important;
      margin-bottom: 1rem !important;
    }
    
    .reveal .slides section li {
      color: #e2e8f0 !important;
      font-size: clamp(1.1rem, 2.7vw, 1.3rem) !important;
      line-height: 1.6 !important;
      margin-bottom: 0.5rem !important;
    }
    
    /* 强调文本样式 */
    .reveal .slides section strong {
      color: #fbbf24 !important;
      font-weight: 600 !important;
    }
    
    .reveal .slides section em {
      color: #a78bfa !important;
      font-style: italic !important;
    }
    
    /* 代码样式增强 */
    code.hljs {
      font-size: clamp(1.1rem, 2.7vw, 1.3rem) !important;
      line-height: 1.6 !important;
      font-weight: 400 !important;
      background: rgba(15, 15, 35, 0.8) !important;
      border: 1px solid #374151 !important;
      border-radius: 8px !important;
      padding: 1rem !important;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3) !important;
    }
    
    pre {
      background: rgba(15, 15, 35, 0.8) !important;
      border: 1px solid #374151 !important;
      border-radius: 12px !important;
      padding: 1.5rem !important;
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.4) !important;
      overflow-x: auto !important;
    }
    
    /* 代码行号高亮样式 */
    .reveal pre code[data-line-numbers] {
      position: relative;
    }
    
    .reveal pre code[data-line-numbers] .line-highlight {
      background: rgba(251, 191, 36, 0.2) !important;
      border-left: 3px solid #fbbf24 !important;
      padding-left: 0.5rem !important;
      margin-left: -0.5rem !important;
    }
    
    /* 确保行号高亮在代码块中正确显示 */
    .reveal pre code[data-line-numbers] .line-highlight:before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 3px;
      background: #fbbf24;
    }
    
    /* 表格样式增强 */
    .reveal table {
      background: rgba(15, 15, 35, 0.6) !important;
      border: 1px solid #374151 !important;
      border-radius: 8px !important;
      overflow: hidden !important;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3) !important;
    }
    
    .reveal table th {
      color: #ffffff !important;
      font-weight: 600 !important;
      padding: 0.8rem !important;
    }
    
    .reveal table td {
      color: #e2e8f0 !important;
      border: 1px solid #374151 !important;
      padding: 0.6rem !important;
      background: rgba(15, 15, 35, 0.3) !important;
    }
    
    .reveal table tr:nth-child(even) td {
      background: rgba(15, 15, 35, 0.5) !important;
    }
    
    /* 链接样式 */
    .reveal a {
      color: #60a5fa !important;
      text-decoration: none !important;
      border-bottom: 1px solid transparent !important;
      transition: all 0.3s ease !important;
    }
    
    .reveal a:hover {
      color: #93c5fd !important;
      border-bottom-color: #93c5fd !important;
    }
    
    /* 滚动条样式 */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    
    ::-webkit-scrollbar-track {
      background: rgba(15, 15, 35, 0.3);
      border-radius: 4px;
    }
    
    ::-webkit-scrollbar-thumb {
      background: linear-gradient(135deg, #374151 0%, #4b5563 100%);
      border-radius: 4px;
      border: 1px solid rgba(15, 15, 35, 0.5);
    }
    
    ::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(135deg, #4b5563 0%, #6b7280 100%);
    }
    
    /* 特殊容器样式 */
    .reveal .slides section div[style*="max-height"] {
      background: rgba(15, 15, 35, 0.4) !important;
      border: 1px solid #374151 !important;
      border-radius: 8px !important;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3) !important;
    }
    
    /* 数学公式样式 */
    .reveal .slides section .MathJax {
      color: #fbbf24 !important;
    }
    
    /* 移动端响应式优化 */
    @media (max-width: 768px) {
      .reveal {
        width: 100% !important;
        height: 100% !important;
      }
      
      .reveal .slides {
        width: 100% !important;
        height: 100% !important;
      }
      
      .reveal .slides section {
        width: 100% !important;
        height: 100% !important;
        box-sizing: border-box !important;
      }
      
      /* 移动端网格布局优化 */
      .reveal .slides section div[style*="grid-template-columns"] {
        display: flex !important;
        flex-direction: column !important;
        gap: 1rem !important;
      }
      
      /* 移动端代码字体调整 - 增大字体 */
      code.hljs {
        font-size: 1.2rem !important;
        line-height: 1.5 !important;
        padding: 0.8rem !important;
      }
      
      pre {
        padding: 1rem !important;
      }
      
      /* 移动端表格优化 */
      .reveal table {
        font-size: 0.9rem !important;
      }
      
      .reveal table th,
      .reveal table td {
        padding: 0.4rem !important;
      }
      
      /* 移动端图片优化 */
      .reveal img {
        max-width: 100% !important;
        height: auto !important;
        border-radius: 8px !important;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3) !important;
      }
      
      /* 移动端卡片优化 */
      .reveal .slides section div[style*="background: rgba(15, 15, 35, 0.4)"] {
        margin: 0.5rem 0 !important;
      }
      
      /* 移动端标题优化 */
      .reveal .slides section h1 {
        font-size: 2.4rem !important;
        margin-bottom: 0.8rem !important;
      }
      
      .reveal .slides section h2 {
        font-size: 2rem !important;
        margin-bottom: 0.6rem !important;
      }
      
      .reveal .slides section h3 {
        font-size: 1.6rem !important;
        margin-bottom: 0.5rem !important;
      }
    }
    
    /* 平板端优化 */
    @media (min-width: 769px) and (max-width: 1024px) {
      .reveal {
        width: 100% !important;
      }
      
      code.hljs {
        font-size: 1.2rem !important;
      }
      
      .reveal table {
        font-size: 1rem !important;
      }
    }
    
    /* 大屏幕优化 */
    @media (min-width: 1400px) { 
      code.hljs {
        font-size: 1.3rem !important;
      }
    }
    
    /* 动画效果 */
    .reveal .slides section {
      transition: all 0.3s ease !important;
    }
    
    .reveal .slides section:hover {
      transform: translateY(-2px) !important;
    }
    
    /* 特殊元素样式 */
    .reveal .slides section small {
      color: #9ca3af !important;
      font-size: 0.9em !important;
    }
    
    .reveal .slides section .fragment {
      opacity: 0.7 !important;
      transition: opacity 0.3s ease !important;
    }
    
    .reveal .slides section .fragment.visible {
      opacity: 1 !important;
    }
  </style>
</head>
<body>

<div class="reveal">
  <div class="slides">

    <!-- 标题页 -->
    <section>
      <div style="text-align: center; padding: 2rem 0;">
        <img src="./resources/Stata.png" style="height: 8rem; margin: 0 0 2rem 0; background: transparent; filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));">
        <h1 style="color: #60a5fa !important; font-size: clamp(3rem, 6vw, 4rem) !important; margin-bottom: 1rem !important; text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3) !important;">
          疫情前后机票价格的季节性研究
        </h1>
        <p style="color: #34d399 !important; font-size: clamp(1.4rem, 3.5vw, 1.7rem) !important; margin-bottom: 1.5rem !important; font-weight: 500 !important;">
          —— 基于巴西航空市场的实证分析 ——
        </p>
        <div style="background: rgba(15, 15, 35, 0.6); border: 1px solid #374151; border-radius: 12px; padding: 1.5rem; margin: 2rem auto; max-width: 600px; box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);">
          <p style="color: #e2e8f0 !important; margin-bottom: 1rem !important;">
            <strong style="color: #fbbf24 !important;">研究作者：</strong>
            <a href="https://github.com/avmoliveira/avdatabr/tree/main" style="color: #60a5fa !important; text-decoration: none !important; border-bottom: 1px solid transparent !important; transition: all 0.3s ease !important;">
              Alessandro V. M. Oliveira
            </a>
          </p>
          <p style="color: #e2e8f0 !important; margin-bottom: 0.5rem !important;">
            <strong style="color: #fbbf24 !important;">数据来源：</strong>巴西民航局(ANAC) 2013-2023年
          </p>
          <p style="color: #e2e8f0 !important; margin-bottom: 0 !important;">
            <strong style="color: #fbbf24 !important;">研究方法：</strong>面板数据固定效应模型
          </p>
        </div>
      </div>
    </section>

    <!-- 一、研究背景与意义 -->
    <section>
      <section>
        <h2>一、研究背景与意义</h2>
      </section>

      <section>
        <h3>1. 价格季节性定义</h3>
        <div style="background: rgba(15, 15, 35, 0.4); border-left: 4px solid #34d399; padding: 1.5rem; border-radius: 8px; margin: 1rem 0; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);">
          <p style="color: #e2e8f0 !important; font-size: clamp(1rem, 2.5vw, 1.2rem) !important; line-height: 1.7 !important; margin-bottom: 1rem !important;">
            指商品/服务价格因<strong style="color: #fbbf24 !important;">季节、假期、消费习惯、天气</strong>等供需因素，在全年呈现<strong style="color: #fbbf24 !important;">周期性波动</strong>的现象。
          </p>
          <p style="color: #e2e8f0 !important; font-size: clamp(1rem, 2.5vw, 1.2rem) !important; line-height: 1.7 !important; margin-bottom: 0 !important;">
            例如航空业中，<strong style="color: #60a5fa !important;">假期出行需求激增</strong>会推高票价，<strong style="color: #a78bfa !important;">淡季需求低迷</strong>则促使票价下降。
          </p>
        </div>
      </section>

      <section>
        <h3>2. 航空业季节性的全链条影响</h3>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; margin: 1.5rem 0;">
          <div style="background: rgba(15, 15, 35, 0.4); border: 1px solid #374151; border-radius: 12px; padding: 1.5rem; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);">
            <h4 style="color: #60a5fa !important; font-size: 1.1rem !important; margin-bottom: 0.8rem !important; border-bottom: 2px solid #60a5fa !important; padding-bottom: 0.3rem !important;">对航司</h4>
            <p style="color: #e2e8f0 !important; font-size: 0.95rem !important; line-height: 1.6 !important; margin: 0 !important;">
              通过季节性调整航班排班、运力与票价，实现<strong style="color: #fbbf24 !important;">高季利润最大化</strong>，低季减少亏损
            </p>
          </div>
          <div style="background: rgba(15, 15, 35, 0.4); border: 1px solid #374151; border-radius: 12px; padding: 1.5rem; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);">
            <h4 style="color: #34d399 !important; font-size: 1.1rem !important; margin-bottom: 0.8rem !important; border-bottom: 2px solid #34d399 !important; padding-bottom: 0.3rem !important;">对机场/空管</h4>
            <p style="color: #e2e8f0 !important; font-size: 0.95rem !important; line-height: 1.6 !important; margin: 0 !important;">
              依据季节性预判旅客流量，优化<strong style="color: #fbbf24 !important;">值机柜台、跑道使用效率</strong>
            </p>
          </div>
          <div style="background: rgba(15, 15, 35, 0.4); border: 1px solid #374151; border-radius: 12px; padding: 1.5rem; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);">
            <h4 style="color: #a78bfa !important; font-size: 1.1rem !important; margin-bottom: 0.8rem !important; border-bottom: 2px solid #a78bfa !important; padding-bottom: 0.3rem !important;">对乘客</h4>
            <p style="color: #e2e8f0 !important; font-size: 0.95rem !important; line-height: 1.6 !important; margin: 0 !important;">
              利用低季低价窗口规划出行，可降低<strong style="color: #fbbf24 !important;">20%-30%出行成本</strong>
            </p>
          </div>
          <div style="background: rgba(15, 15, 35, 0.4); border: 1px solid #374151; border-radius: 12px; padding: 1.5rem; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);">
            <h4 style="color: #fbbf24 !important; font-size: 1.1rem !important; margin-bottom: 0.8rem !important; border-bottom: 2px solid #fbbf24 !important; padding-bottom: 0.3rem !important;">对市场竞争</h4>
            <p style="color: #e2e8f0 !important; font-size: 0.95rem !important; line-height: 1.6 !important; margin: 0 !important;">
              季节性差异推动航司创新，如LCC在低季推出<strong style="color: #fbbf24 !important;">"早鸟票"</strong>
            </p>
          </div>
        </div>
      </section>

      <section>
        <h3>3. 疫情的三重冲击</h3>
        <div style="display: flex; flex-direction: column; gap: 1.5rem; margin: 1.5rem 0;">
          <div style="background: linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(220, 38, 38, 0.1) 100%); border: 1px solid #ef4444; border-radius: 12px; padding: 1.5rem; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);">
            <h4 style="color: #ef4444 !important; font-size: 1.2rem !important; margin-bottom: 0.8rem !important; display: flex; align-items: center; gap: 0.5rem;">
              <span style="background: #ef4444; color: white; padding: 0.3rem 0.6rem; border-radius: 50%; font-size: 0.8rem; font-weight: bold;">1</span>
              需求端冲击
            </h4>
            <p style="color: #e2e8f0 !important; font-size: 1rem !important; line-height: 1.6 !important; margin: 0 !important;">
              远程办公使<strong style="color: #fbbf24 !important;">商务出行减少30%以上</strong>，乘客偏好<strong style="color: #fbbf24 !important;">国内目的地</strong>
            </p>
          </div>
          <div style="background: linear-gradient(135deg, rgba(245, 158, 11, 0.1) 0%, rgba(217, 119, 6, 0.1) 100%); border: 1px solid #f59e0b; border-radius: 12px; padding: 1.5rem; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);">
            <h4 style="color: #f59e0b !important; font-size: 1.2rem !important; margin-bottom: 0.8rem !important; display: flex; align-items: center; gap: 0.5rem;">
              <span style="background: #f59e0b; color: white; padding: 0.3rem 0.6rem; border-radius: 50%; font-size: 0.8rem; font-weight: bold;">2</span>
              供给端冲击
            </h4>
            <p style="color: #e2e8f0 !important; font-size: 1rem !important; line-height: 1.6 !important; margin: 0 !important;">
              全球供应链中断导致<strong style="color: #fbbf24 !important;">飞机交付延迟</strong>，航司运力恢复缓慢
            </p>
          </div>
          <div style="background: linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(124, 58, 237, 0.1) 100%); border: 1px solid #8b5cf6; border-radius: 12px; padding: 1.5rem; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);">
            <h4 style="color: #8b5cf6 !important; font-size: 1.2rem !important; margin-bottom: 0.8rem !important; display: flex; align-items: center; gap: 0.5rem;">
              <span style="background: #8b5cf6; color: white; padding: 0.3rem 0.6rem; border-radius: 50%; font-size: 0.8rem; font-weight: bold;">3</span>
              定价逻辑冲击
            </h4>
            <p style="color: #e2e8f0 !important; font-size: 1rem !important; line-height: 1.6 !important; margin: 0 !important;">
              疫情初期航司为维持现金流被迫<strong style="color: #fbbf24 !important;">大幅降价</strong>，可能重塑长期季节性定价习惯
            </p>
          </div>
        </div>
      </section>
    </section>

    <!-- 二、文献综述 -->
    <section>
      <section>
      <h2>二、文献综述</h2>
      </section>

      <section>
        <h3>文献综述：核心研究主题</h3>
        <div style="max-height: 70vh; overflow-y: auto; border: 1px solid #ccc; padding: 10px;">
          <table style="font-size: 0.7em;">
            <thead>
              <tr>
                <th>研究主题</th>
                <th>代表学者</th>
                <th>核心发现</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>机场类型与季节性</td>
                <td>Halpern (2011)</td>
                <td>旅游机场季节性强于大城市机场，国际/包机加剧季节性</td>
              </tr>
              <tr>
                <td>机场盈利与季节性</td>
                <td>Zuidberg (2017)</td>
                <td>季节性与盈利呈倒"U"型关系</td>
              </tr>
              <tr>
                <td>巴西航空定价</td>
                <td>Póvoa & Oliveira (2008)</td>
                <td>节假日使票价平均上涨8%-10%</td>
              </tr>
              <tr>
                <td>巴西航空定价</td>
                <td>Brito et al. (2021)</td>
                <td>机场私有化后部分航线票价上涨5%</td>
              </tr>
              <tr>
                <td>旅游季节性</td>
                <td>Cazanova et al. (2014)</td>
                <td>节日/假期是季节性核心驱动</td>
              </tr>
              <tr>
                <td>航司季节性策略</td>
                <td>Merkert & Webber (2018)</td>
                <td>高季应优先提高上座率而非涨价</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>
    </section>

    <!-- 三、研究方法与数据 -->
    <section>
      <section>
        <h2>三、研究方法与数据</h2>
      </section>

      <section>
        <h3>1. 数据来源与样本</h3>
        <p><strong>数据来源：</strong>巴西民航局(ANAC) 2013年1月-2023年11月国内城市对月度数据</p>
        <p><strong>数据平台：</strong>哈佛Dataverse平台的AVDATA-BR-CP数据库</p>
      </section>

      <section data-auto-animate>
        <h3 data-id="sample-selection-title">样本筛选：I. 导入数据</h3>
        <pre data-id="sample-selection-code"><code class="language-stata" data-trim data-noescape data-line-numbers>
          * 从哈佛Dataverse导入航空票价数据集
          import delimited ///
          https://dataverse.harvard.edu/api/access/datafile/avdatabr_cp_cae/8171526, ///
          case(preserve) clear
          * case(preserve) 保留变量名原始大小写
          * clear 清除内存中现有数据
        </code></pre>
      </section>

      <section data-auto-animate>
        <h3 data-id="sample-selection-title">样本筛选：II. 筛选核心样本</h3>
        <pre data-id="sample-selection-code"><code class="language-stata" data-trim data-noescape data-line-numbers="8-9|11-15|17-18|20-27|29-40">
            * 从哈佛Dataverse导入航空票价数据集
            import delimited ///
            https://dataverse.harvard.edu/api/access/datafile/avdatabr_cp_cae/8171526, ///
            case(preserve) clear
            * case(preserve) 保留变量名原始大小写
            * clear 清除内存中现有数据

            * 保留2013年及以后的数据
            keep if Year>=2013

            * 生成平均飞机规模变量：可用座位数/出发班次
            gen mean_aircsize = nr_available_seats/nr_departures

            * 查看平均飞机规模的描述性统计
            summ mean_aircsize

            * 删除平均飞机规模小于50的观测值（排除小型航线）
            drop if mean_aircsize<50

            * 按城市对分组，生成每个城市对的观测数量
            bysort CityPair: gen nr_panels = [_N]

            * 查看面板观测数量的分布
            summ nr_panels

            * 删除观测数量少于60的城市对
            drop if nr_panels<60

            * 显示最终样本的面板结构信息
            * 城市对数量
            tab CityPair
            di "城市对数量 = " `r(r)'

            * 时间期数（月份）
            tab YearMonth
            di "时间期数 = " `r(r)'

            * 年份数量
            tab Year
            di "年份数量 = " `r(r)'

            * end of section
        </code></pre>
      </section>

      <section>
        <h3>样本筛选：III. 最终样本统计</h3>
        <p><strong>最终样本：</strong>487个城市对、131个月度时期(2013.01-2023.11)</p>
        <p>共55,950个观测值</p>
      </section>

      <section data-auto-animate>
        <h3 data-id="key-variable-title">2. 核心变量：面板数据声明</h3>
        <pre data-id="key-variable-code"><code class="language-stata" data-trim data-noescape data-line-numbers>
          * 生成城市对编码变量
          egen k = group(CityPair)

          * 生成时间期编码变量
          egen t = group(YearMonth)

          * 声明面板数据格式：k为个体维度，t为时间维度
          tsset k t

          * 变量提取...
        </code></pre>
      </section>

      <section data-auto-animate>
        <h3 data-id="key-variable-title">核心变量：变量提取</h3>
        <pre data-id="key-variable-code"><code class="language-stata" data-trim data-noescape data-line-numbers="10-17">
          * 生成城市对编码变量
          egen k = group(CityPair)

          * 生成时间期编码变量
          egen t = group(YearMonth)

          * 声明面板数据格式：k为个体维度，t为时间维度
          tsset k t
          
          * 从原始数据集中提取需要的变量
          keep k t price km_great_circle_distance jetfuel_price_org ///
          nr_revenue_pax market_concentration_hhi pc_load_factor ///
          YearMonth Year Month CityPair

          * 描述性统计：排除时间标识变量
          fsum, not(YearMonth k t) format(%10.2f)

          * 变量转换...
        </code></pre>
      </section>

      <section data-auto-animate>
        <h3 data-id="key-variable-title">核心变量：变量转换</h3>
        <pre data-id="key-variable-code"><code class="language-stata" data-trim data-noescape data-line-numbers="35-52|54-58">
            * 生成城市对编码变量
            egen k = group(CityPair)

            * 生成时间期编码变量
            egen t = group(YearMonth)

            * 声明面板数据格式：k为个体维度，t为时间维度
            tsset k t
            
            * 从原始数据集中提取需要的变量
            keep k t price km_great_circle_distance jetfuel_price_org ///
            nr_revenue_pax market_concentration_hhi pc_load_factor ///
            YearMonth Year Month CityPair

            * 描述性统计：排除时间标识变量
            fsum, not(YearMonth k t) format(%10.2f)

            * 生成城市对编码变量
            egen k = group(CityPair)

            * 生成时间期编码变量
            egen t = group(YearMonth)

            * 声明面板数据格式：k为个体维度，t为时间维度
            tsset k t
            
            * 从原始数据集中提取需要的变量
            keep k t price km_great_circle_distance jetfuel_price_org ///
            nr_revenue_pax market_concentration_hhi pc_load_factor ///
            YearMonth Year Month CityPair

            * 描述性统计：排除时间标识变量
            fsum, not(YearMonth k t) format(%10.2f)

            * 生成模型所需的转换变量
            * 被解释变量：机票价格的对数
            gen AirFare = ln(price)

            * 核心解释变量：距离的对数
            gen Distance = ln(km_great_circle_distance)

            * 核心解释变量：燃油价格的对数
            gen FuelPrice = ln(jetfuel_price_org)

            * 核心解释变量：乘客密度的对数
            gen PaxDens = ln(nr_revenue_pax)

            * 核心解释变量：市场集中度的对数（乘以10000避免取对数问题）
            gen MktConc = ln(market_concentration_hhi*10000)

            * 核心解释变量：载客率的对数
            gen LoadFactor = ln(pc_load_factor)

            * 疫情虚拟变量：2020年2月-2022年4月期间为1，其余为0
            gen Pandemic = (YearMonth>=202002 & YearMonth<=202204)

            * 时间趋势变量：将时间标准化到0-2.18范围
            gen Trend = t/60

            * 季节性变量生成...
        </code></pre>
      </section>

      <section data-auto-animate>
        <h3 data-id="key-variable-title">核心变量：季节性变量生成</h3>
        <pre data-id="key-variable-code"><code class="language-stata" data-trim data-noescape data-line-numbers="60-71">
            * 生成城市对编码变量
            egen k = group(CityPair)

            * 生成时间期编码变量
            egen t = group(YearMonth)

            * 声明面板数据格式：k为个体维度，t为时间维度
            tsset k t
            
            * 从原始数据集中提取需要的变量
            keep k t price km_great_circle_distance jetfuel_price_org ///
            nr_revenue_pax market_concentration_hhi pc_load_factor ///
            YearMonth Year Month CityPair

            * 描述性统计：排除时间标识变量
            fsum, not(YearMonth k t) format(%10.2f)

            * 生成城市对编码变量
            egen k = group(CityPair)

            * 生成时间期编码变量
            egen t = group(YearMonth)

            * 声明面板数据格式：k为个体维度，t为时间维度
            tsset k t
            
            * 从原始数据集中提取需要的变量
            keep k t price km_great_circle_distance jetfuel_price_org ///
            nr_revenue_pax market_concentration_hhi pc_load_factor ///
            YearMonth Year Month CityPair

            * 描述性统计：排除时间标识变量
            fsum, not(YearMonth k t) format(%10.2f)

            * 生成模型所需的转换变量
            * 被解释变量：机票价格的对数
            gen AirFare = ln(price)

            * 核心解释变量：距离的对数
            gen Distance = ln(km_great_circle_distance)

            * 核心解释变量：燃油价格的对数
            gen FuelPrice = ln(jetfuel_price_org)

            * 核心解释变量：乘客密度的对数
            gen PaxDens = ln(nr_revenue_pax)

            * 核心解释变量：市场集中度的对数（乘以10000避免取对数问题）
            gen MktConc = ln(market_concentration_hhi*10000)

            * 核心解释变量：载客率的对数
            gen LoadFactor = ln(pc_load_factor)

            * 疫情虚拟变量：2020年2月-2022年4月期间为1，其余为0
            gen Pandemic = (YearMonth>=202002 & YearMonth<=202204)

            * 时间趋势变量：将时间标准化到0-2.18范围
            gen Trend = t/60
            
            * 冬季假期虚拟变量：7月为1（巴西学校冬季假期）
            gen WintBreak = (Month==7)

            * 夏季搜索期虚拟变量：8-11月为1（夏季高峰前的搜索预订期）
            gen SummBrSearch = (Month==8 | Month==9 | Month==10 | Month==11)

            * 夏季高峰虚拟变量：12月-次年2月为1（巴西夏季旅游高峰）
            * 基准组：3月
            gen SummBreak = (Month==12 | Month==1 | Month==2)

            * 淡季虚拟变量：4-6月为1（旅游淡季）
            gen LowSeason = (Month==4 | Month==5 | Month==6)

            * end of section
        </code></pre>
      </section>

      <section>
        <h3>核心变量：描述性统计</h3>
        <pre><code class="language-stata" data-trim data-noescape data-line-numbers>
* 转换后变量的描述性统计
fsum AirFare Distance FuelPrice PaxDens MktConc ///
     LoadFactor Pandemic Trend
        </code></pre>
      </section>

      <section>
        <h3>变量描述性统计表</h3>
        <div style="max-height: 70vh; overflow-y: auto; border: 1px solid #ccc; padding: 10px;">
          <table style="font-size: 0.8em;">
            <thead>
              <tr>
                <th>变量</th>
                <th>观测数</th>
                <th>均值</th>
                <th>标准差</th>
                <th>最小值</th>
                <th>最大值</th>
              </tr>
            </thead>
            <tbody>
              <tr><td>机票价格(对数)</td><td>55,950</td><td>6.25</td><td>0.40</td><td>4.11</td><td>8.29</td></tr>
              <tr><td>距离(对数)</td><td>55,950</td><td>6.65</td><td>0.68</td><td>4.68</td><td>7.95</td></tr>
              <tr><td>燃油价格(对数)</td><td>55,950</td><td>1.10</td><td>0.28</td><td>0.43</td><td>1.82</td></tr>
              <tr><td>乘客密度(对数)</td><td>55,950</td><td>8.63</td><td>1.47</td><td>2.20</td><td>12.98</td></tr>
              <tr><td>市场集中度(对数)</td><td>55,950</td><td>8.61</td><td>0.39</td><td>7.80</td><td>9.21</td></tr>
              <tr><td>载客率(对数)</td><td>55,950</td><td>4.33</td><td>0.15</td><td>2.57</td><td>4.61</td></tr>
              <tr><td>疫情虚拟变量</td><td>55,950</td><td>0.18</td><td>0.39</td><td>0.00</td><td>1.00</td></tr>
              <tr><td>时间趋势</td><td>55,950</td><td>1.10</td><td>0.62</td><td>0.02</td><td>2.18</td></tr>
            </tbody>
          </table>
        </div>
      </section>

      <section>
        <h3>3. 模型设定：基础模型公式</h3>
        <p><strong>无季节性控制：</strong></p>
        <div style="max-height: 70vh; overflow-y: auto; border: 1px solid #ccc; padding: 10px;">
          \[
          \begin{aligned}
          ln(AirFare_{it}) &= \beta_0 + \beta_1 ln(FuelPrice_{it}) + \beta_2 ln(PaxDens_{it}) \\
          &+ \beta_3 ln(MktConc_{it}) + \beta_4 LoadFactor_{it} \\
          &+ \beta_5 Pandemic_{it} + \beta_6 Trend_{it} + \alpha_i + \varepsilon_{it}
          \end{aligned}
          \]
        </div>
      </section>
      <section>
        <p><strong>有季节性控制：</strong>在上述公式中加入季节性变量</p>
        <div style="max-height: 70vh; overflow-y: auto; border: 1px solid #ccc; padding: 10px;">
          \[
          \begin{aligned}
          &\beta_7 WintBreak_{it} + \beta_8 SummBrSearch_{it} \\
          &+ \beta_9 SummBreak_{it} + \beta_{10} LowSeason_{it}
          \end{aligned}
          \]
        </div>
      </section>

      <section data-auto-animate>
        <h3 data-id="base-model-title">基础模型：Stata代码（无季节性）</h3>
        <pre data-id="base-model-code"><code class="language-stata" data-trim data-noescape data-line-numbers>
          * 无季节性控制的固定效应回归
          reghdfe AirFare FuelPrice PaxDens MktConc LoadFactor ///
            Pandemic Trend ///
            , absorb(CityPair)
          * absorb(CityPair)：控制城市对固定效应

          * 存储回归结果
          est store WithoutSeas

          * 季节性控制...
        </code></pre>
      </section>

      <section data-auto-animate>
        <h3 data-id="base-model-title">基础模型：Stata代码（有季节性）</h3>
        <pre data-id="base-model-code"><code class="language-stata" data-trim data-noescape data-line-numbers="10-17">
          * 无季节性控制的固定效应回归
          reghdfe AirFare FuelPrice PaxDens MktConc LoadFactor ///
            Pandemic Trend ///
            , absorb(CityPair)
          * absorb(CityPair)：控制城市对固定效应

          * 存储回归结果
          est store WithoutSeas

          * 包含季节性控制的固定效应回归
          reghdfe AirFare FuelPrice PaxDens MktConc LoadFactor ///
            Pandemic Trend ///
            WintBreak SummBrSearch SummBreak LowSeason ///
            , absorb(CityPair)

          * 存储回归结果
          est store WithSeas

          * 结果输出...
        </code></pre>
      </section>

      <section data-auto-animate>
        <h3 data-id="base-model-title">基础模型：结果输出</h3>
        <pre data-id="base-model-code"><code class="language-stata" data-trim data-noescape data-line-numbers="19-28">
          * 无季节性控制的固定效应回归
          reghdfe AirFare FuelPrice PaxDens MktConc LoadFactor ///
            Pandemic Trend ///
            , absorb(CityPair)
          * absorb(CityPair)：控制城市对固定效应

          * 存储回归结果
          est store WithoutSeas

          * 包含季节性控制的固定效应回归
          reghdfe AirFare FuelPrice PaxDens MktConc LoadFactor ///
            Pandemic Trend ///
            WintBreak SummBrSearch SummBreak LowSeason ///
            , absorb(CityPair)

          * 存储回归结果
          est store WithSeas

          * 使用esttab输出两个模型的对比表，并保存为表2
          esttab 	WithoutSeas WithSeas ///
              , nocons nose not nogaps noobs ///
              b(%9.4f) varwidth(14) brackets ///
              aic(%9.0fc) bic(%9.0fc) ar2 scalar(N) sfmt(%9.0fc) ///
              addnote("Notes: Fixed Effect estimation")
          * nocons: 不显示常数项
          * nose: 不显示标准误
          * not: 不显示t统计量
          * brackets: 标准误放在括号中

          * end of section
        </code></pre>
      </section>

      <section>
        <h3>表2 有无季节性控制的回归结果对比</h3>
        <div style="max-height: 70vh; overflow-y: auto; border: 1px solid #ccc; padding: 10px;">
          <table style="font-size: 0.7em;">
            <thead>
              <tr>
                <th>变量</th>
                <th>(1) 无季节性</th>
                <th>(2) 有季节性</th>
              </tr>
            </thead>
            <tbody>
              <tr><td>燃油价格</td><td>0.2931***</td><td>0.2897***</td></tr>
              <tr><td>乘客密度</td><td>-0.0888***</td><td>-0.0937***</td></tr>
              <tr><td>市场集中度</td><td>0.0854***</td><td>0.0859***</td></tr>
              <tr><td>载客率</td><td>0.3121***</td><td>0.2935***</td></tr>
              <tr><td>疫情变量</td><td>-0.1674***</td><td>-0.1690***</td></tr>
              <tr><td>时间趋势</td><td>0.0215***</td><td>0.0180***</td></tr>
              <tr><td>冬季假期</td><td>-</td><td>-0.0009</td></tr>
              <tr><td>夏季搜索期</td><td>-</td><td>0.0593***</td></tr>
              <tr><td>夏季高峰</td><td>-</td><td>0.0145***</td></tr>
              <tr><td>淡季</td><td>-</td><td>-0.0452***</td></tr>
              <tr><td>调整R²</td><td>0.579</td><td>0.588</td></tr>
              <tr><td>AIC</td><td>8,539</td><td>7,265</td></tr>
              <tr><td>BIC</td><td>8,601</td><td>7,363</td></tr>
              <tr><td>观测数</td><td>55,950</td><td>55,950</td></tr>
            </tbody>
          </table>
        </div>
        <p style="font-size: 0.6em;">* p<0.05, ** p<0.01, *** p<0.001</p>
      </section>

      <section>
        <h3>精细化季节性模型：生成月度变量</h3>
        <pre><code class="language-stata" data-trim data-noescape data-line-numbers="1-9|10-14|15-21">
* 生成更细粒度的月度虚拟变量
* 夏季前4个月：8月
gen SummBreak_bef4 = (Month==8)
* 夏季前3个月：9月
gen SummBreak_bef3 = (Month==9)
* 夏季前2个月：10月
gen SummBreak_bef2 = (Month==10)
* 夏季前1个月：11月
gen SummBreak_bef1 = (Month==11)
* 夏季开始月：12月
gen SummBreak_aft0 = (Month==12)
* 夏季后1个月：1月
gen SummBreak_aft1 = (Month==1)
* 夏季后2个月：2月
gen SummBreak_aft2 = (Month==2)
* 淡季第1个月：4月（基准组为3月）
gen LowSeason_aft1 = (Month==4)
* 淡季第2个月：5月
gen LowSeason_aft2 = (Month==5)
* 淡季第3个月：6月
gen LowSeason_aft3 = (Month==6)
        </code></pre>
      </section>

      <section>
        <h3>精细化季节性模型：回归与输出</h3>
        <pre><code class="language-stata" data-trim data-noescape data-line-numbers="1-9|11-16">
* 包含精细化季节性的固定效应回归
* 使用通配符 * 包含所有相关变量
reghdfe AirFare FuelPrice PaxDens MktConc LoadFactor ///
	Pandemic Trend ///
	WintBreak SummBreak_* LowSeason_* ///
	, absorb(CityPair)

* 存储回归结果
est store GranularSeas

* 使用esttab输出细粒度季节性模型的结果表，并保存为表3
esttab 	GranularSeas ///
		, nocons nose not nogaps noobs ///
		b(%9.4f) varwidth(14) brackets ///
		aic(%9.0fc) bic(%9.0fc) ar2 scalar(N) sfmt(%9.0fc) ///
		addnote("Notes: Fixed Effect estimation")
        </code></pre>
      </section>

      <section>
        <h3>表3 精细化季节性模型回归结果</h3>
        <div style="max-height: 70vh; overflow-y: auto; border: 1px solid #ccc; padding: 10px;">
          <table style="font-size: 0.65em;">
            <thead>
              <tr><th>变量</th><th>系数</th></tr>
            </thead>
            <tbody>
              <tr><td>燃油价格</td><td>0.2910***</td></tr>
              <tr><td>乘客密度</td><td>-0.0941***</td></tr>
              <tr><td>市场集中度</td><td>0.0865***</td></tr>
              <tr><td>载客率</td><td>0.2950***</td></tr>
              <tr><td>疫情变量</td><td>-0.1677***</td></tr>
              <tr><td>时间趋势</td><td>0.0167***</td></tr>
              <tr><td>冬季假期(7月)</td><td>-0.0008</td></tr>
              <tr><td>夏季前4月(8月)</td><td>0.0563***</td></tr>
              <tr><td>夏季前3月(9月)</td><td>0.0688***</td></tr>
              <tr><td>夏季前2月(10月)</td><td>0.0812***</td></tr>
              <tr><td>夏季前1月(11月)</td><td>0.0315***</td></tr>
              <tr><td>夏季开始(12月)</td><td>0.0609***</td></tr>
              <tr><td>夏季后1月(1月)</td><td>-0.0156**</td></tr>
              <tr><td>夏季后2月(2月)</td><td>0.0020</td></tr>
              <tr><td>淡季1月(4月)</td><td>-0.0492***</td></tr>
              <tr><td>淡季2月(5月)</td><td>-0.0380***</td></tr>
              <tr><td>淡季3月(6月)</td><td>-0.0482***</td></tr>
              <tr><td>调整R²</td><td>0.591</td></tr>
              <tr><td>观测数</td><td>55,950</td></tr>
            </tbody>
          </table>
        </div>
      </section>

      <section>
        <h3>精细化季节性模型：系数图</h3>
        <pre><code class="language-stata" data-trim data-noescape data-line-numbers>
* 使用coefplot绘制GranularSeas模型中季节性变量的系数图，并显示95%置信区间，输出结果为图1
coefplot GranularSeas ///
		, keep(WintBreak SummBreak_* SummBreak_* LowSeason_*) ///
		xline(0, lcolor(green) lpattern(dash)) scheme(s2color) ///
		level(95) recast(connected) lpattern(longdash) lwidth(0.1)
* keep(): 指定要绘制的变量
* xline(0): 在x=0处添加参考线
* scheme(s2color): 使用s2color配色方案
* level(95): 95%置信区间
* recast(connected): 连线图形式
        </code></pre>
      </section>

      <section>
        <h3>图1 价格季节性系数图</h3>
        <img src="./resources/价格季节性系数图.png" style="max-height: 50vh;">
        <p class="fragment" data-fragment-index="1" style="font-size: 0.7em;"><strong>结论：</strong>价格季节性呈"先升后降、峰谷分明"特征，10月为全年价格高点，4月为低点</p>
      </section>

      <section data-auto-animate>
        <h3 data-id="event-study-title">疫情前后事件研究：疫情前样本</h3>
        <pre data-id="event-study-code"><code class="language-stata" data-trim data-noescape data-line-numbers>
          * 疫情前样本回归（2013年1月-2020年1月）
          reghdfe AirFare FuelPrice PaxDens MktConc LoadFactor ///
            Trend WintBreak SummBreak_* LowSeason_* ///
            if YearMonth<=202001, absorb(CityPair)

          * 存储疫情前回归结果
          est store PrePandemic

          *  疫情后样本回归...
        </code></pre>
      </section>

      <section data-auto-animate>
        <h3 data-id="event-study-title">疫情前后事件研究：疫情后样本</h3>
        <pre data-id="event-study-code"><code class="language-stata" data-trim data-noescape data-line-numbers="9-15">
          * 疫情前样本回归（2013年1月-2020年1月）
          reghdfe AirFare FuelPrice PaxDens MktConc LoadFactor ///
            Trend WintBreak SummBreak_* LowSeason_* ///
            if YearMonth<=202001, absorb(CityPair)

          * 存储疫情前回归结果
          est store PrePandemic
          
          * 疫情后样本回归（2022年5月-2023年11月）
          reghdfe AirFare FuelPrice PaxDens MktConc LoadFactor ///
            Trend WintBreak SummBreak_* LowSeason_* ///
            if YearMonth>202204, absorb(CityPair)

          * 存储疫情后回归结果
          est store PostPandemic

          * 结果输出...
        </code></pre>
      </section>

      <section data-auto-animate>
        <h3 data-id="event-study-title">疫情前后事件研究：结果输出</h3>
        <pre data-id="event-study-code"><code class="language-stata" data-trim data-noescape data-line-numbers="17-24">
          * 疫情前样本回归（2013年1月-2020年1月）
          reghdfe AirFare FuelPrice PaxDens MktConc LoadFactor ///
            Trend WintBreak SummBreak_* LowSeason_* ///
            if YearMonth<=202001, absorb(CityPair)

          * 存储疫情前回归结果
          est store PrePandemic
          
          * 疫情后样本回归（2022年5月-2023年11月）
          reghdfe AirFare FuelPrice PaxDens MktConc LoadFactor ///
            Trend WintBreak SummBreak_* LowSeason_* ///
            if YearMonth>202204, absorb(CityPair)

          * 存储疫情后回归结果
          est store PostPandemic

          * 使用esttab将疫情前与疫情后两组结果并列输出，输出结果为表4
          esttab 	PrePandemic PostPandemic ///
              , nocons nose not nogaps noobs mtitles ///
              b(%9.4f) varwidth(14) brackets ///
              aic(%9.0fc) bic(%9.0fc) ar2 scalar(N) sfmt(%9.0fc) ///
              addnote("Notes: Dependent variable - AirFare" ///
              "Fixed Effect estimation")
          * mtitles: 显示模型标题

          * end
        </code></pre>
      </section>
      
      <section>
        <h3>表4 疫情前后回归结果对比（上半部分）</h3>
        <div style="max-height: 70vh; overflow-y: auto; border: 1px solid #ccc; padding: 10px;">
          <table style="font-size: 0.65em;">
            <thead>
              <tr><th>变量</th><th>疫情前</th><th>疫情后</th></tr>
            </thead>
            <tbody>
              <tr><td>燃油价格</td><td>0.1677***</td><td>0.0681*</td></tr>
              <tr><td>乘客密度</td><td>-0.1608***</td><td>-0.1466***</td></tr>
              <tr><td>市场集中度</td><td>0.0889***</td><td>-0.0582***</td></tr>
              <tr><td>载客率</td><td>0.3020***</td><td>0.1889***</td></tr>
              <tr><td>时间趋势</td><td>-0.0244***</td><td>0.2301***</td></tr>
              <tr><td>冬季假期(7月)</td><td>0.0668***</td><td>-0.0293*</td></tr>
              <tr><td>夏季前4月(8月)</td><td>0.0822***</td><td>0.0688***</td></tr>
              <tr><td>夏季前3月(9月)</td><td>0.0878***</td><td>0.0876***</td></tr>
              <tr><td>夏季前2月(10月)</td><td>0.1178***</td><td>0.0559***</td></tr>
            </tbody>
          </table>
        </div>
      </section>

      <section>
        <h3>表4 疫情前后回归结果对比（下半部分）</h3>
        <div style="max-height: 70vh; overflow-y: auto; border: 1px solid #ccc; padding: 10px;">
          <table style="font-size: 0.65em;">
            <thead>
              <tr><th>变量</th><th>疫情前</th><th>疫情后</th></tr>
            </thead>
            <tbody>
              <tr><td>夏季前1月(11月)</td><td>0.0686***</td><td>0.0313*</td></tr>
              <tr><td>夏季开始(12月)</td><td>0.1107***</td><td>0.0546***</td></tr>
              <tr><td>夏季后1月(1月)</td><td>0.0263***</td><td>-0.0176</td></tr>
              <tr><td>夏季后2月(2月)</td><td>0.0181**</td><td>-0.0486**</td></tr>
              <tr><td>淡季1月(4月)</td><td>-0.0265***</td><td>-0.1048***</td></tr>
              <tr><td>淡季2月(5月)</td><td>-0.0125*</td><td>-0.0269*</td></tr>
              <tr><td>淡季3月(6月)</td><td>-0.0138*</td><td>-0.0444**</td></tr>
              <tr><td>调整R²</td><td>0.647</td><td>0.722</td></tr>
              <tr><td>观测数</td><td>37,441</td><td>8,373</td></tr>
            </tbody>
          </table>
        </div>
      </section>

      <section>
        <h3>疫情前后事件研究：系数对比图</h3>
        <pre><code class="language-stata" data-trim data-noescape data-line-numbers>
* 用coefplot将疫情前后模型的季节性系数作对比图，便于可视化结构性变化，输出结果为图2
coefplot PrePandemic PostPandemic ///
		, keep(WintBreak SummBreak_* SummBreak_* LowSeason_*) ///
		xline(0, lcolor(green) lpattern(dash)) scheme(s2color) ///
		level(95) recast(connected) lpattern(longdash) lwidth(0.1)
* 同时显示疫情前和疫情后的系数，便于对比结构性变化
        </code></pre>
      </section>

      <section>
        <h3>图2 疫情前后季节性系数对比图</h3>
        <img src="./resources/疫情前后季节性系数对比图.png" style="max-height: 50vh;">
        <p class="fragment" data-fragment-index="1" style="font-size: 0.7em;"><strong>结论：</strong>疫情后季节性"峰谷差扩大"，呈现"去集中化"特征</p>
      </section>
    </section>

    <!-- 四、实证结果核心结论 -->
    <section>
      <section>
      <h2>四、实证结果核心结论</h2>
      </section>

      <section>
        <h3>1. 基础模型结果解读</h3>
        <ul>
          <li><strong>核心驱动因素：</strong>
            <ul>
              <li>油价每上涨10%，票价上涨2.9%</li>
              <li>乘客密度每增加10%，票价下降0.935%（规模经济）</li>
              <li>市场集中度每提高10%，票价上涨0.86%（垄断溢价）</li>
            </ul>
          </li>
          <li><strong>疫情影响：</strong>疫情期间票价平均下降16.7%</li>
          <li><strong>季节性特征：</strong>
            <ul>
              <li>夏季前搜索期票价最高，较基准3月上涨5.9%</li>
              <li>淡季票价最低，较3月下降4.95%</li>
            </ul>
          </li>
        </ul>
      </section>

      <section>
        <h3>2. 精细化季节性模型关键发现</h3>
        <ul>
          <li><strong>价格上涨周期：</strong>8月开始涨价，10月达峰值(8.12%)，11月涨幅骤降至3.15%（节假日增加运力）</li>
          <li><strong>夏季后期波动：</strong>1月票价较3月下降1.56%（节后促销策略）</li>
          <li><strong>淡季稳定性：</strong>4-6月票价持续低于基准，4月降幅最大(-4.92%)</li>
        </ul>
      </section>

      <section>
        <h3>3. 疫情前后事件研究核心发现</h3>

        <ul>
          <li><strong>成本敏感度变化：</strong>疫情后燃油价对票价影响下降(0.1677→0.0681)</li>
          <li><strong>市场结构反转：</strong>疫情前集中度推高票价(0.0889***)，疫情后转为抑制票价(-0.0582***)</li>
          <li><strong>长期趋势逆转：</strong>疫情前每5年票价下降2.5%，疫情后每5年上涨23%</li>
          <li><strong>季节性重构：</strong>
            <ul>
              <li>7月假期：疫情前上涨6.68%，疫情后下降2.93%（符号反转）</li>
              <li>10月峰值：涨幅从11.78%降至5.59%</li>
              <li>4月淡季：降幅从2.65%扩大至10.48%</li>
            </ul>
          </li>
        </ul>
      </section>
    </section>

    <!-- 五、研究结论与建议 -->
    <section>
    <section>
      <h2>五、研究结论与建议</h2>
    </section>

      <section>
        <h3>1. 核心结论</h3>
        <ul>
          <li><strong>季节性重构：</strong>
            <ul>
              <li>7月假期票价从涨转降(-2.93%)</li>
              <li>10月峰值涨幅减半(5.59% vs 11.78%)</li>
              <li>4月淡季降幅扩大3倍(-10.48% vs -2.65%)</li>
            </ul>
          </li>
          <li><strong>长期趋势逆转：</strong>疫情后每5年票价上涨23%，主因全球飞机短缺与需求复苏的供需错配</li>
          <li><strong>驱动因素切换：</strong>疫情前票价由"成本+垄断"驱动，疫情后转为"竞争+运力"驱动</li>
        </ul>
      </section>

      <section>
        <h3>2. 实践建议：对航司</h3>
        <ul>
          <li>夏季前(8-9月)适度控价，避免10月峰值过高导致需求流失</li>
          <li>7月推出"亲子错峰票"，抵消需求降温</li>
          <li>淡季(4月)推出"套票"，提升运力利用率</li>
          <li>优先租赁飞机（而非等待新飞机交付），缓解运力短缺</li>
        </ul>
      </section>

      <section>
        <h3>实践建议：对乘客</h3>
        <ul>
          <li><strong>休闲出行：</strong>优先选择4月、6月购票，较旺季节省10%-15%成本</li>
          <li><strong>商务出行：</strong>11月(节假日多)票价较低，可灵活安排行程</li>
        </ul>
      </section>

      <section>
        <h3>3. 未来研究</h3>
        <ul>
          <li>处理组 vs 控制组研究（经济增长差异）</li>
          <li>多固定效应扩展（区域固定效应）</li>
          <li>旅游航线专项分析</li>
          <li>长期趋势反转机制（运力-票价回归模型）</li>
        </ul>
      </section>
    </section>

    <!-- 结束页 -->
    <section>
      <div style="text-align: center; padding: 2rem 0;">
        <h2 style="color: #34d399 !important; font-size: clamp(2.4rem, 5vw, 3rem) !important; margin-bottom: 2rem !important;">
          感谢观看！
        </h2>
        <div style="display: grid; grid-template-columns: 1fr; gap: 1.5rem; margin: 2rem 0; max-width: 800px; margin-left: auto; margin-right: auto;">
          
          <div style="display: flex; align-items: center; background: rgba(15, 15, 35, 0.6); border: 1px solid #374151; border-radius: 12px; padding: 1rem 1.5rem; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3); gap: 1rem;">
            <span style="font-size: 1.4rem;">📄</span>
            <span style="color: #60a5fa !important; font-weight: 600; font-size: 1.2rem;">论文</span>
            <a href="https://arxiv.org/abs/2402.13789" style="color: #e2e8f0 !important; text-decoration: none !important; font-size: 1.1rem !important; word-break: break-all !important;">
              https://arxiv.org/abs/2402.13789
            </a>
          </div>
     
          <div style="display: flex; align-items: center; background: rgba(15, 15, 35, 0.6); border: 1px solid #374151; border-radius: 12px; padding: 1rem 1.5rem; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3); gap: 1rem;">
            <span style="font-size: 1.4rem;">📊</span>
            <span style="color: #34d399 !important; font-weight: 600; font-size: 1.2rem;">数据</span>
            <a href="https://doi.org/10.7910/DVN/CRYXUZ" style="color: #e2e8f0 !important; text-decoration: none !important; font-size: 1.1rem !important; word-break: break-all !important;">
              https://doi.org/10.7910/DVN/CRYXUZ
            </a>
          </div>
     
          <div style="display: flex; align-items: center; background: rgba(15, 15, 35, 0.6); border: 1px solid #374151; border-radius: 12px; padding: 1rem 1.5rem; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3); gap: 1rem;">
            <span style="font-size: 1.4rem;">💻</span>
            <span style="color: #fbbf24 !important; font-weight: 600; font-size: 1.2rem;">代码</span>
            <a href="https://github.com/avmoliveira/avdatabr/blob/main/" style="color: #e2e8f0 !important; text-decoration: none !important; font-size: 1.1rem !important; word-break: break-all !important;">
              https://github.com/avmoliveira/avdatabr/blob/main/
            </a>
          </div>
     
          <div style="display: flex; align-items: center; background: rgba(15, 15, 35, 0.6); border: 1px solid #374151; border-radius: 12px; padding: 1rem 1.5rem; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3); gap: 1rem;">
            <span style="font-size: 1.4rem;">🎨</span>
            <span style="color: #a78bfa !important; font-weight: 600; font-size: 1.2rem;">演示</span>
            <a href="https://github.com/hakimel/reveal.js" style="color: #e2e8f0 !important; text-decoration: none !important; font-size: 1.1rem !important; word-break: break-all !important;">
              https://github.com/hakimel/reveal.js
            </a>
          </div>
    
        </div>
      </div>
    </section>
        

  </div>
</div>

<!-- Reveal.js 核心 -->
<script src="https://cdn.jsdelivr.net/npm/reveal.js/dist/reveal.js"></script>

<!-- Highlight.js 核心 -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>

<!-- 引入 highlight.js 的 Stata 语言定义 -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/stata.min.js"></script>

<!-- Reveal.js highlight 插件 -->
<script src="https://cdn.jsdelivr.net/npm/reveal.js/plugin/highlight/highlight.js"></script>

<!-- 引入mathjax2插件 -->
<script src="https://cdn.jsdelivr.net/npm/reveal.js/plugin/math/math.js"></script>

<script>
  // 确保 highlight.js 加载 Stata 语言
  if (typeof hljs !== 'undefined') {
    console.log('Registered languages:', hljs.listLanguages());
    console.log('Stata registered:', 'stata' in hljs.listLanguages());
    // hljs.registerLanguage('stata', window.hljsDefineStata || function(hljs){});
  }

  // 初始化 Reveal
  Reveal.initialize({
    hash: true,
    width: 1440,
    height: 720,
    margin: 0.1,
    minScale: 0.2,
    maxScale: 2.0,
    center: true,
    transition: 'slide',
    transitionSpeed: 'default',
    backgroundTransition: 'fade',
    viewDistance: 3,
    mobileViewDistance: 2,
    // 确保代码高亮和行号功能正常
    highlight: {
      highlightOnLoad: true,
      escapeHTML: false
    },
    mathjax2: {
            config: 'TeX-AMS_HTML-full',
            TeX: {
                Macros: {
                    R: '\\mathbb{R}',
                    set: [ '\\left\\{#1 \\; ; \\; #2\\right\\}', 2 ]
                }
            }
        },
    plugins: [ RevealHighlight, RevealMath.MathJax2 ]
  });
  
  // 响应式处理
  function handleResize() {
    const isMobile = window.innerWidth <= 768;
    const isTablet = window.innerWidth > 768 && window.innerWidth <= 1024;
    
    if (isMobile) {
      Reveal.configure({
        width: '100%',
        height: '100%',
        margin: 0.05,
        minScale: 0.1,
        maxScale: 1.5
      });
    } else if (isTablet) {
      Reveal.configure({
        width: '100%',
        height: '100%',
        margin: 0.08,
        minScale: 0.2,
        maxScale: 1.8
      });
    } else {
      Reveal.configure({
        width: '100%',
        height: '100%',
        margin: 0.1,
        minScale: 0.2,
        maxScale: 2.0
      });
    }
  }
  
  // 监听窗口大小变化
  window.addEventListener('resize', handleResize);
  window.addEventListener('load', handleResize);
  
  // 确保代码行号高亮功能正常工作
  Reveal.on('ready', function() {
    // 重新初始化代码高亮
    if (typeof hljs !== 'undefined') {
      hljs.highlightAll();
    }
    
    // 确保行号高亮功能正常
    const codeBlocks = document.querySelectorAll('code[data-line-numbers]');
    codeBlocks.forEach(function(block) {
      if (block.dataset.lineNumbers) {
        // 触发行号高亮
        Reveal.sync();
      }
    });
  });
  
  // 当幻灯片改变时重新同步代码高亮
  Reveal.on('slidechanged', function(event) {
    // 延迟执行以确保DOM更新完成
    setTimeout(function() {
      if (typeof hljs !== 'undefined') {
        hljs.highlightAll();
      }
    }, 100);
  });
</script>

</body>
</html>
